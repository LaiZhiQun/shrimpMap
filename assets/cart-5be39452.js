import{u as c,x as s}from"./index-67967cf5.js";const{VITE_APP_URL:i,VITE_APP_PATH:r}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"brad5566",BASE_URL:"/shrimpMap/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},u=c("cart",{state:()=>({cart:{},ticketNum:1,shakeState:!1,isLoading:!1}),actions:{getCarts(){this.isLoading=!0,s({method:"get",url:`${i}api/${r}/cart`}).then(t=>{this.cart=t.data.data,this.isLoading=!1})},adjustmentTicket(t,e,a,h){this.cart.carts.forEach(o=>{o.id===e&&(t==="+"?o.qty++:t==="-"&&o.qty--)})},updateCartQty(){Promise.all(this.cart.carts.map(t=>{const e={product_id:t.product.id,qty:t.qty};return s({method:"put",url:`${i}api/${r}/cart/${t.id}`,data:{data:e}}).then(a=>{this.getCarts()}).catch(a=>{console.log(a),this.getCarts()})}))},removeCart(t){this.isLoading=!0,s({method:"delete",url:`${i}api/${r}/cart/${t}`}).then(e=>{alert("已刪除該品項"),this.isLoading=!1,this.getCarts()})},addToCart(t){const e={product_id:t,qty:this.ticketNum};s({method:"post",url:`${i}api/${r}/cart`,data:{data:e}}).then(a=>{alert(a.data.message),this.getCarts(),this.ticketNum=1,setTimeout(()=>{this.shakeState=!1},1e3),this.shakeState=!0}).catch(a=>{console.log(a)})},adjustmentTickets(t){t==="+"?this.ticketNum++:t==="-"&&this.ticketNum>1&&this.ticketNum--}}});export{u};
