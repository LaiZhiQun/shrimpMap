import{m as v,_ as C,r as u,o,c as n,d as h,i as T,p as b,e as g,b as t,g as L,j as V,F as m,h as P,t as l,l as f,k as S,v as I,w as _,n as A,q as E}from"./index-67967cf5.js";import{u as d}from"./cart-5be39452.js";const j={methods:{...v(d,["updateCartQty"])}},y=e=>(b("data-v-29865fb9"),e=e(),g(),e),R={class:"d-flex justify-content-end mt-5"},q=y(()=>t("span",null,"填寫資料",-1)),F=y(()=>t("div",{class:"liquid"},null,-1));function D(e,c,k,$,i,r){const p=u("RouterLink");return o(),n("div",R,[h(p,{onClick:e.updateCartQty,to:"/form"},{default:T(()=>[q,F]),_:1},8,["onClick"])])}const N=C(j,[["render",D],["__scopeId","data-v-29865fb9"]]);const{VITE_APP_URL:U,VITE_APP_PATH:z}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"brad5566",BASE_URL:"/shrimpMap/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},B={data(){return{coupon_code:""}},components:{CartToForm:N},computed:{...L(d,["cart","isLoading"]),...V(d,["isLoading"])},methods:{...v(d,["adjustmentTicket","getCarts","removeCart","updateCartNum","updateCartQty"]),addCouponCode(){this.isLoading=!0;const e={code:this.coupon_code};this.$http({method:"post",url:`${U}api/${z}/coupon`,data:{data:e}}).then(c=>{alert("加入優惠券"),this.getCarts(),this.isLoading=!1})}},mounted(){this.getCarts()}},a=e=>(b("data-v-70a45d5c"),e=e(),g(),e),M={key:0,class:"container"},Q={class:"table bg-white caption-top"},H=a(()=>t("caption",{class:"ms-5 text-white h2"},"購物車",-1)),O=a(()=>t("thead",null,[t("tr",{class:"bg-title h4"},[t("th",{class:"ps-xl-5 text-center text-xl-start",scope:"col"},"店家"),t("th",{class:"ps-xl-4 text-center text-xl-start",scope:"col"},"數量"),t("th",{class:"text-center text-xl-end pe-xl-5",scope:"col"},"金額")])],-1)),W={class:"text-end",scope:"row"},G={class:"d-xl-flex flex-xl-row justify-content-xl-start d-flex flex-column align-items-end ms-xl-5"},J=["src"],K={class:"text-end text-xl-start ms-2"},X={class:"h6 mt-1"},Y=["onClick"],Z={class:"align-middle"},tt=["onClick"],et=a(()=>t("i",{class:"bi bi-dash-lg"},null,-1)),st=[et],ot=["value"],nt=a(()=>t("span",{class:"h6 text-center input-size ps-xl-3"},null,-1)),at=["onClick"],ct=a(()=>t("i",{class:"bi bi-plus-lg"},null,-1)),lt=[ct],dt={class:"text-xl-end text-center align-middle pe-xl-5 h4"},it={key:0,class:"text-end h6 mt-2 text-success"},rt=a(()=>t("td",{colspan:"2",class:"text-end h5"},"總計",-1)),pt={class:"text-xl-end text-center px-xl-5 h5"},_t={key:0},ut=a(()=>t("td",{colspan:"2",class:"text-end h5 text-success"},"折價後",-1)),ht={class:"text-xl-end text-center px-xl-5 h5"},xt={class:"input-group mb-3 input-group-sm col-xl-6 col-12 ps-xl-0 ps-5 m-auto"},mt={class:"input-group-append"},ft={key:1,class:"d-flex justify-content-center align-items-center"},vt=a(()=>t("h2",{class:"text-white py-10"},"目前購物車是空的",-1)),Ct=[vt];function bt(e,c,k,$,i,r){const p=u("Loading"),w=u("CartToForm");return o(),n(m,null,[h(p,{active:e.isLoading,"z-index":1060},null,8,["active"]),e.cart.carts&&e.cart.carts.length>0?(o(),n("div",M,[t("table",Q,[H,O,t("tbody",null,[(o(!0),n(m,null,P(e.cart.carts,s=>(o(),n("tr",{key:s.id},[t("th",W,[t("div",G,[t("img",{class:"d-block",src:s.product.imageUrl,alt:"",style:{width:"80px"}},null,8,J),t("div",K,[t("p",X,l(s.product.title),1),t("button",{onClick:_(x=>e.removeCart(s.id),["prevent"]),class:"btn btn-sm btn-danger mt-2",type:"button"},"移除",8,Y)])])]),t("td",Z,[t("a",{onClick:_(x=>e.adjustmentTicket("-",s.id,s.qty,s.product.id),["prevent"]),class:A([{"mouse-disabled":s.qty==1},"d-inline-block px-xl-3 px-2"]),href:"#"},st,10,tt),t("input",{value:s.qty,type:"number",class:"h6 text-center input-size ps-xl-3",disabled:""},null,8,ot),nt,t("a",{onClick:_(x=>e.adjustmentTicket("+",s.id,s.qty,s.product.id),["prevent"]),class:"d-inline-block px-xl-3 px-2",href:"#"},lt,8,at)]),t("td",dt,[E(" $"+l(e.$filters.currency(s.final_total))+" ",1),s.coupon?(o(),n("div",it,"套用優惠券")):f("",!0)])]))),128))]),t("tfoot",null,[t("tr",null,[rt,t("td",pt,"$ "+l(e.$filters.currency(e.cart.total)),1)]),e.cart.final_total!==e.cart.total?(o(),n("tr",_t,[ut,t("td",ht,"$ "+l(e.$filters.currency(e.cart.final_total)),1)])):f("",!0)])]),t("div",xt,[S(t("input",{type:"text",class:"form-control","onUpdate:modelValue":c[0]||(c[0]=s=>i.coupon_code=s),placeholder:"請輸入優惠碼 goodprice"},null,512),[[I,i.coupon_code]]),t("div",mt,[t("button",{class:"btn btn-outline-secondary text-white",type:"button",onClick:c[1]||(c[1]=(...s)=>r.addCouponCode&&r.addCouponCode(...s))}," 套用優惠碼 ")])]),h(w)])):(o(),n("div",ft,Ct))],64)}const kt=C(B,[["render",bt],["__scopeId","data-v-70a45d5c"]]);export{kt as default};
