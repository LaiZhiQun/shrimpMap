import{_ as y,r as p,o as n,c as a,d as _,i as T,p as C,e as g,b as t,g as L,j as S,m as V,F as v,h as A,t as c,l as f,k as i,s as b,w as d,v as P,n as j,q as I}from"./index-72553ecb.js";import{u as r}from"./cart-c08ee8cc.js";const E={},k=e=>(C("data-v-4e567951"),e=e(),g(),e),Q={class:"d-flex justify-content-end mt-5"},R=k(()=>t("span",null,"填寫資料",-1)),q=k(()=>t("div",{class:"liquid"},null,-1));function F(e,o){const u=p("RouterLink");return n(),a("div",Q,[_(u,{to:"/form"},{default:T(()=>[R,q]),_:1})])}const D=y(E,[["render",F],["__scopeId","data-v-4e567951"]]);const{VITE_APP_URL:N,VITE_APP_PATH:U}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"brad5566",BASE_URL:"/shrimpMap/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},z={data(){return{coupon_code:""}},components:{CartToForm:D},computed:{...L(r,["cart","isLoading","isAdjustQty"]),...S(r,["isLoading"])},methods:{...V(r,["adjustmentTicket","getCarts","removeCart","updateCartNum","updateCartQty","updateCartQty"]),addCouponCode(){this.isLoading=!0;const e={code:this.coupon_code};this.$http({method:"post",url:`${N}api/${U}/coupon`,data:{data:e}}).then(o=>{alert("加入優惠券"),this.getCarts(),this.isLoading=!1})}},mounted(){this.getCarts()}},l=e=>(C("data-v-abfa253e"),e=e(),g(),e),B={key:0,class:"container"},M={class:"table bg-white caption-top"},H=l(()=>t("caption",{class:"ms-5 text-white h2"},"購物車",-1)),O=l(()=>t("thead",null,[t("tr",{class:"bg-title h4"},[t("th",{class:"ps-xl-5 text-center text-xl-start",scope:"col"},"店家"),t("th",{class:"ps-xl-4 text-center text-xl-start",scope:"col"},"數量"),t("th",{class:"text-center text-xl-end pe-xl-5",scope:"col"},"金額")])],-1)),W={class:"text-end",scope:"row"},G={class:"d-xl-flex flex-xl-row justify-content-xl-start d-flex flex-column align-items-end ms-xl-5"},J=["src"],K={class:"text-end text-xl-start ms-2"},X={class:"h6 mt-1"},Y=["onClick"],Z={class:"align-middle"},tt=["onClick"],et=l(()=>t("i",{class:"bi bi-dash-lg"},null,-1)),st=[et],ot=["value"],nt=l(()=>t("span",{class:"h6 text-center input-size ps-xl-3"},null,-1)),at=["onClick"],lt=l(()=>t("i",{class:"bi bi-plus-lg"},null,-1)),ct=[lt],dt={class:"text-xl-end text-center align-middle pe-xl-5 h4"},it={key:0,class:"text-end h6 mt-2 text-success"},rt=l(()=>t("td",{colspan:"2",class:"text-end h5"},"總計",-1)),pt={class:"text-xl-end text-center px-xl-5 h5"},_t={key:0},ut=l(()=>t("td",{colspan:"2",class:"text-end h5 text-success"},"折價後",-1)),ht={class:"text-xl-end text-center px-xl-5 h5"},xt={class:"text-end mb-3 mb-xl-0"},mt={class:"input-group mb-3 input-group-sm col-xl-6 col-12 ps-xl-0 ps-5 m-auto"},vt={class:"input-group-append"},ft={key:1,class:"d-flex justify-content-center align-items-center"},bt=l(()=>t("h2",{class:"text-white py-10"},"目前購物車是空的",-1)),yt=[bt];function Ct(e,o,u,gt,h,x){const $=p("Loading"),w=p("CartToForm");return n(),a(v,null,[_($,{active:e.isLoading,"z-index":1060},null,8,["active"]),e.cart.carts&&e.cart.carts.length>0?(n(),a("div",B,[t("table",M,[H,O,t("tbody",null,[(n(!0),a(v,null,A(e.cart.carts,s=>(n(),a("tr",{key:s.id},[t("th",W,[t("div",G,[t("img",{class:"d-block",src:s.product.imageUrl,alt:"",style:{width:"80px"}},null,8,J),t("div",K,[t("p",X,c(s.product.title),1),t("button",{onClick:d(m=>e.removeCart(s.id),["prevent"]),class:"btn btn-sm btn-danger mt-2",type:"button"},"移除",8,Y)])])]),t("td",Z,[t("a",{onClick:d(m=>e.adjustmentTicket("-",s.id,s.qty,s.product.id),["prevent"]),class:j([{"mouse-disabled":s.qty==1},"d-inline-block px-xl-3 px-2"]),href:"#"},st,10,tt),t("input",{value:s.qty,type:"number",class:"h6 text-center input-size ps-xl-3",disabled:""},null,8,ot),nt,t("a",{onClick:d(m=>e.adjustmentTicket("+",s.id,s.qty,s.product.id),["prevent"]),class:"d-inline-block px-xl-3 px-2",href:"#"},ct,8,at)]),t("td",dt,[I(" $"+c(e.$filters.currency(s.final_total))+" ",1),s.coupon?(n(),a("div",it,"套用優惠券")):f("",!0)])]))),128))]),t("tfoot",null,[t("tr",null,[rt,t("td",pt,"$ "+c(e.$filters.currency(e.cart.total)),1)]),e.cart.final_total!==e.cart.total?(n(),a("tr",_t,[ut,t("td",ht,"$ "+c(e.$filters.currency(e.cart.final_total)),1)])):f("",!0)])]),i(t("div",xt,[t("button",{onClick:o[0]||(o[0]=d((...s)=>e.updateCartQty&&e.updateCartQty(...s),["prevent"])),class:"btn btn-outline-primary text-white",type:"button"},"重新確認購物車數量")],512),[[b,e.isAdjustQty]]),t("div",mt,[i(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=s=>h.coupon_code=s),placeholder:"請輸入優惠碼 goodprice"},null,512),[[P,h.coupon_code]]),t("div",vt,[t("button",{class:"btn btn-outline-secondary text-white",type:"button",onClick:o[2]||(o[2]=(...s)=>x.addCouponCode&&x.addCouponCode(...s))}," 套用優惠碼 ")])]),i(t("div",null,[_(w)],512),[[b,!e.isAdjustQty]])])):(n(),a("div",ft,yt))],64)}const wt=y(z,[["render",Ct],["__scopeId","data-v-abfa253e"]]);export{wt as default};
