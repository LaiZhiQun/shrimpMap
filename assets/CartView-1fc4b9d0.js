import{_ as v,r,o,c as n,d as _,i as $,p as b,e as g,b as t,g as w,j as T,m as L,F as m,h as V,t as l,l as f,k as P,v as S,w as d,n as I,q as A}from"./index-29bfecb7.js";import{u as i}from"./cart-640bd20a.js";const E={},C=e=>(b("data-v-4e567951"),e=e(),g(),e),j={class:"d-flex justify-content-end mt-5"},R=C(()=>t("span",null,"填寫資料",-1)),q=C(()=>t("div",{class:"liquid"},null,-1));function F(e,a){const p=r("RouterLink");return o(),n("div",j,[_(p,{to:"/form"},{default:$(()=>[R,q]),_:1})])}const D=v(E,[["render",F],["__scopeId","data-v-4e567951"]]);const{VITE_APP_URL:N,VITE_APP_PATH:U}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"brad5566",BASE_URL:"/shrimpMap/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},z={data(){return{coupon_code:""}},components:{CartToForm:D},computed:{...w(i,["cart","isLoading"]),...T(i,["isLoading"])},methods:{...L(i,["adjustmentTicket","getCarts","removeCart","updateCartNum"]),addCouponCode(){this.isLoading=!0;const e={code:this.coupon_code};this.$http({method:"post",url:`${N}api/${U}/coupon`,data:{data:e}}).then(a=>{alert("加入優惠券"),this.getCarts(),this.isLoading=!1})}},mounted(){this.getCarts()}},c=e=>(b("data-v-9eb43cf6"),e=e(),g(),e),B={key:0,class:"container"},M={class:"table bg-white caption-top"},H=c(()=>t("caption",{class:"ms-5 text-white h2"},"購物車",-1)),O=c(()=>t("thead",null,[t("tr",{class:"bg-title h4"},[t("th",{class:"ps-xl-5 text-center text-xl-start",scope:"col"},"店家"),t("th",{class:"ps-xl-4 text-center text-xl-start",scope:"col"},"數量"),t("th",{class:"text-center text-xl-end pe-xl-5",scope:"col"},"金額")])],-1)),W={class:"text-end",scope:"row"},G={class:"d-xl-flex flex-xl-row justify-content-xl-start d-flex flex-column align-items-end ms-xl-5"},J=["src"],K={class:"text-end text-xl-start ms-2"},Q={class:"h6 mt-1"},X=["onClick"],Y={class:"align-middle"},Z=["onClick"],tt=c(()=>t("i",{class:"bi bi-dash-lg"},null,-1)),et=[tt],st=["value"],ot=c(()=>t("span",{class:"h6 text-center input-size ps-xl-3"},null,-1)),nt=["onClick"],ct=c(()=>t("i",{class:"bi bi-plus-lg"},null,-1)),at=[ct],lt={class:"text-xl-end text-center align-middle pe-xl-5 h4"},dt={key:0,class:"text-end h6 mt-2 text-success"},it=c(()=>t("td",{colspan:"2",class:"text-end h5"},"總計",-1)),rt={class:"text-xl-end text-center px-xl-5 h5"},_t={key:0},pt=c(()=>t("td",{colspan:"2",class:"text-end h5 text-success"},"折價後",-1)),ut={class:"text-xl-end text-center px-xl-5 h5"},ht={class:"input-group mb-3 input-group-sm col-xl-6 col-12 ps-xl-0 ps-5 m-auto"},xt={class:"input-group-append"},mt={key:1,class:"d-flex justify-content-center align-items-center"},ft=c(()=>t("h2",{class:"text-white py-10"},"目前購物車是空的",-1)),vt=[ft];function bt(e,a,p,gt,u,h){const y=r("Loading"),k=r("CartToForm");return o(),n(m,null,[_(y,{active:e.isLoading,"z-index":1060},null,8,["active"]),e.cart.carts&&e.cart.carts.length>0?(o(),n("div",B,[t("table",M,[H,O,t("tbody",null,[(o(!0),n(m,null,V(e.cart.carts,s=>(o(),n("tr",{key:s.id},[t("th",W,[t("div",G,[t("img",{class:"d-block",src:s.product.imageUrl,alt:"",style:{width:"80px"}},null,8,J),t("div",K,[t("p",Q,l(s.product.title),1),t("button",{onClick:d(x=>e.removeCart(s.id),["prevent"]),class:"btn btn-sm btn-danger mt-2",type:"button"},"移除",8,X)])])]),t("td",Y,[t("a",{onClick:d(x=>e.adjustmentTicket("-",s.id,s.qty,s.product.id),["prevent"]),class:I([{"mouse-disabled":s.qty==1},"d-inline-block px-xl-3 px-2"]),href:"#"},et,10,Z),t("input",{value:s.qty,type:"number",class:"h6 text-center input-size ps-xl-3",disabled:""},null,8,st),ot,t("a",{onClick:d(x=>e.adjustmentTicket("+",s.id,s.qty,s.product.id),["prevent"]),class:"d-inline-block px-xl-3 px-2",href:"#"},at,8,nt)]),t("td",lt,[A(" $"+l(e.$filters.currency(s.final_total))+" ",1),s.coupon?(o(),n("div",dt,"套用優惠券")):f("",!0)])]))),128))]),t("tfoot",null,[t("tr",null,[it,t("td",rt,"$ "+l(e.$filters.currency(e.cart.total)),1)]),e.cart.final_total!==e.cart.total?(o(),n("tr",_t,[pt,t("td",ut,"$ "+l(e.$filters.currency(e.cart.final_total)),1)])):f("",!0)])]),t("div",ht,[P(t("input",{type:"text",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=s=>u.coupon_code=s),placeholder:"請輸入優惠碼"},null,512),[[S,u.coupon_code]]),t("div",xt,[t("button",{class:"btn btn-outline-secondary text-white",type:"button",onClick:a[1]||(a[1]=(...s)=>h.addCouponCode&&h.addCouponCode(...s))}," 套用優惠碼 ")])]),_(k)])):(o(),n("div",mt,vt))],64)}const kt=v(z,[["render",bt],["__scopeId","data-v-9eb43cf6"]]);export{kt as default};
