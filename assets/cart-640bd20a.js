import{u,x as i}from"./index-29bfecb7.js";const{VITE_APP_URL:r,VITE_APP_PATH:o}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"brad5566",BASE_URL:"/shrimpMap/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},c=u("cart",{state:()=>({cart:{},ticketNum:1,shakeState:!1,isLoading:!1}),actions:{getCarts(){this.isLoading=!0,i({method:"get",url:`${r}api/${o}/cart`}).then(t=>{this.cart=t.data.data,this.isLoading=!1})},adjustmentTicket(t,e,a,h){const s={product_id:h,qty:a};t==="+"?(s.qty++,this.updateCartNum(s,e)):t==="-"&&(s.qty--,this.updateCartNum(s,e))},updateCartNum(t,e){i({method:"put",url:`${r}api/${o}/cart/${e}`,data:{data:t}}).then(a=>{this.getCarts()})},removeCart(t){this.isLoading=!0,i({method:"delete",url:`${r}api/${o}/cart/${t}`}).then(e=>{alert("已刪除該品項"),this.isLoading=!1,this.getCarts()})},addToCart(t){const e={product_id:t,qty:this.ticketNum};i({method:"post",url:`${r}api/${o}/cart`,data:{data:e}}).then(a=>{alert(a.data.message),this.getCarts(),this.ticketNum=1,setTimeout(()=>{this.shakeState=!1},1e3),this.shakeState=!0}).catch(a=>{console.log(a)})},adjustmentTickets(t){t==="+"?this.ticketNum++:t==="-"&&this.ticketNum>1&&this.ticketNum--}}});export{c as u};
