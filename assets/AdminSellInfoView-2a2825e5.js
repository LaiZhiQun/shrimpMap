import{_ as f,o as a,c as d,b as e,k as n,v as r,a3 as V,a4 as v,a as w,u as g,t as m,m as A,r as u,F as P,h as $,d as _}from"./index-55a00b2a.js";import{P as T}from"./PaginationComponent-47c7755c.js";import{u as U}from"./login-62e4fa59.js";import{M as k}from"./bootstrap.esm-434bcbc7.js";const E={props:["sell","isNew"],data(){return{tempSell:{}}},emits:["updateSell"],watch:{sell(){this.tempSell=this.sell}}},I={class:"modal fade",id:"sellInfoModal",tabindex:"-1",role:"dialog","aria-labelledby":"sellModalLabel","aria-hidden":"true",ref:"sellInfoModal"},L={class:"modal-dialog modal-xl"},C={class:"modal-content border-0"},N={class:"modal-header bg-dark text-white"},R={id:"sellModalLabel",class:"modal-title"},D={key:0},B={key:1},H=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),O={class:"modal-body"},F={class:"row justify-content-center"},W={class:"col-sm-8"},j={class:"mb-3"},q=e("label",{for:"title",class:"form-label text-dark"},"店家名稱",-1),z={class:"row"},G={class:"mb-3 col-md-6"},J=e("label",{for:"city",class:"form-label text-dark"},"縣市",-1),K=w('<option disabled value="">請選擇縣市</option><option value="基隆市">基隆市</option><option value="台北市">台北市</option><option value="新北市">新北市</option><option value="桃園市">桃園市</option><option value="新竹縣">新竹縣</option><option value="新竹市">新竹市</option><option value="苗栗縣">苗栗縣</option><option value="台中市">台中市</option><option value="彰化縣">彰化縣</option><option value="南投縣">南投縣</option><option value="雲林縣">雲林縣</option><option value="嘉義縣">嘉義縣</option><option value="嘉義市">嘉義市</option><option value="台南市">台南市</option><option value="高雄市">高雄市</option><option value="屏東縣">屏東縣</option><option value="台東縣">台東縣</option><option value="花蓮縣">花蓮縣</option><option value="宜蘭縣">宜蘭縣</option>',20),Q=[K],X={class:"mb-3 col-md-6"},Y=e("label",{for:"price",class:"form-label text-dark"},"單位",-1),Z={class:"row"},ee={class:"mb-3 col-md-6"},te=e("label",{for:"origin_price",class:"form-label text-dark"},"售價",-1),le={class:"mb-3 col-md-6"},oe=e("label",{for:"businessTime",class:"form-label text-dark"},"等待時間",-1),se={class:"mb-3 col-md-6"},ie=e("label",{for:"price",class:"form-label text-dark"},"聯絡方式",-1),ne={class:"mb-3 col-md-6"},ae=e("label",{for:"description",class:"form-label text-dark"},"蝦種",-1),de={class:"mb-3 col-md-6"},ce=e("label",{for:"content",class:"form-label text-dark"},"備註",-1),re={class:"mb-3 col-md-6"},pe=e("label",{for:"tip",class:"form-label text-dark"},"備註",-1),me=e("hr",null,null,-1),ue={class:"mb-3"},_e={class:"form-check"},he=e("label",{class:"form-check-label text-dark",for:"is_enabled"},"是否公開",-1),be={class:"mb-3"},fe={class:"form-check"},Se=e("label",{class:"form-check-label text-dark",for:"is_enabled"},"是否售出",-1),ve={class:"modal-footer"},ge=e("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Pe(s,t,p,S,l,i){return a(),d("div",I,[e("div",L,[e("div",C,[e("div",N,[e("h5",R,[p.isNew?(a(),d("span",D,"新增店家")):(a(),d("span",B,"編輯店家"))]),H]),e("div",O,[e("div",F,[e("div",W,[e("div",j,[q,n(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=o=>l.tempSell.store_name=o),type:"text",class:"form-control",placeholder:"請輸入店家名稱"},null,512),[[r,l.tempSell.store_name]])]),e("div",z,[e("div",G,[J,n(e("select",{id:"city","onUpdate:modelValue":t[1]||(t[1]=o=>l.tempSell.title=o),class:"form-select"},Q,512),[[V,l.tempSell.title]])]),e("div",X,[Y,n(e("input",{id:"unit","onUpdate:modelValue":t[2]||(t[2]=o=>l.tempSell.unit=o),type:"text",class:"form-control",placeholder:"請輸入(多少錢/幾斤)"},null,512),[[r,l.tempSell.unit]])])]),e("div",Z,[e("div",ee,[te,n(e("input",{id:"origin_price","onUpdate:modelValue":t[3]||(t[3]=o=>l.tempSell.price=o),type:"number",min:"0",class:"form-control",placeholder:"請輸入售價"},null,512),[[r,l.tempSell.price,void 0,{number:!0}]])]),e("div",le,[oe,n(e("input",{id:"businessTime","onUpdate:modelValue":t[4]||(t[4]=o=>l.tempSell.timeWait=o),type:"text",class:"form-control",placeholder:"單位: 分鐘"},null,512),[[r,l.tempSell.timeWait]])]),e("div",se,[ie,n(e("input",{id:"price","onUpdate:modelValue":t[5]||(t[5]=o=>l.tempSell.author=o),type:"text",class:"form-control",placeholder:"請輸入line"},null,512),[[r,l.tempSell.author]])]),e("div",ne,[ae,n(e("input",{id:"description","onUpdate:modelValue":t[6]||(t[6]=o=>l.tempSell.description=o),type:"text",class:"form-control",placeholder:"公蝦、母蝦或綜合"},null,512),[[r,l.tempSell.description]])]),e("div",de,[ce,n(e("input",{id:"content","onUpdate:modelValue":t[7]||(t[7]=o=>l.tempSell.content=o),type:"text",class:"form-control",placeholder:"備註"},null,512),[[r,l.tempSell.content]])]),e("div",re,[pe,n(e("input",{id:"tip","onUpdate:modelValue":t[8]||(t[8]=o=>l.tempSell.tip=o),type:"text",class:"form-control",placeholder:"備註"},null,512),[[r,l.tempSell.tip]])])]),me,e("div",ue,[e("div",_e,[n(e("input",{id:"is_enabled","onUpdate:modelValue":t[9]||(t[9]=o=>l.tempSell.isPublic=o),class:"form-check-input",type:"checkbox","true-value":!0,"false-value":!1},null,512),[[v,l.tempSell.isPublic]]),he])]),e("div",be,[e("div",fe,[n(e("input",{id:"is_enabled","onUpdate:modelValue":t[10]||(t[10]=o=>l.tempSell.isSold=o),class:"form-check-input",type:"checkbox","true-value":!0,"false-value":!1},null,512),[[v,l.tempSell.isSold]]),Se])])])])]),e("div",ve,[ge,e("button",{type:"button",class:"btn btn-primary",onClick:t[11]||(t[11]=o=>s.$emit("updateSell",l.tempSell))}," 確認 ")])])])],512)}const ke=f(E,[["render",Pe]]),{VITE_APP_URL:xe,VITE_APP_PATH:Me}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"brad5566",BASE_URL:"/shrimpMap/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},ye={props:["tempProduct","getProductsList"],methods:{delProduct(){this.$http({method:"delete",url:`${xe}api/${Me}/admin/article/${this.tempProduct.id}`}).then(s=>{alert(s.data.message),this.$emit("closeModal","del"),this.getProductsList()}).catch(s=>{console.log(s),alert(s.data.message)})}}},Ve={id:"delSellModal",ref:"delSellModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delSellModal","aria-hidden":"true"},we={class:"modal-dialog"},Ae={class:"modal-content border-0"},$e=e("div",{class:"modal-header bg-danger text-white"},[e("h5",{id:"delSellModal",class:"modal-title"},[e("span",null,"刪除店家")]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Te={class:"modal-body text-dark"},Ue={class:"text-danger text-dark"},Ee={class:"modal-footer"},Ie=e("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Le(s,t,p,S,l,i){return a(),d("div",Ve,[e("div",we,[e("div",Ae,[$e,e("div",Te,[g(" 是否刪除 "),e("strong",Ue,m(p.tempProduct.store_name),1),g(" 店家(刪除後將無法恢復)。 ")]),e("div",Ee,[Ie,e("button",{type:"button",onClick:t[0]||(t[0]=(...o)=>i.delProduct&&i.delProduct(...o)),class:"btn btn-danger"}," 確認刪除 ")])])])],512)}const Ce=f(ye,[["render",Le]]),{VITE_APP_URL:h,VITE_APP_PATH:b}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"brad5566",BASE_URL:"/shrimpMap/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Ne={data(){return{articles:[],page:{},tempSell:{},isNew:!1,time:""}},components:{SellInfoModal:ke,PaginationComponent:T,delSell:Ce},methods:{...A(U,["checkLogin"]),getArticles(s=1){this.$http({method:"get",url:`${h}api/${b}/admin/articles/?page=${s}`}).then(t=>{this.articles=t.data.articles,this.page=t.data.pagination}).catch(t=>{console.log(t)})},openModal(s,t){s==="edit"?(this.tempSell={...t},this.isNew=!1,this.sellModal.show()):s==="delete"?(this.tempSell={...t},this.dellSell.show()):s==="new"&&(this.tempSell={},this.isNew=!0,this.sellModal.show())},updateSell(){if(!this.isNew)this.$http({method:"put",url:`${h}api/${b}/admin/article/${this.tempSell.id}`,data:{data:this.tempSell}}).then(s=>{alert(s.data.message),this.sellModal.hide(),this.getArticles()}).catch(s=>{console.log(s)});else{const s=new Date,t=Math.floor(s.getTime()/1e3);this.tempSell.create_at=t,this.$http({method:"post",url:`${h}api/${b}/admin/article`,data:{data:this.tempSell}}).then(p=>{alert("已新增店家"),this.sellModal.hide(),this.getArticles()}).catch(p=>{console.log(p)})}},closeModal(s){s==="del"&&this.dellSell.hide()}},mounted(){this.checkLogin(),this.getArticles(),this.sellModal=new k(this.$refs.SellInfoModal.$refs.sellInfoModal),this.dellSell=new k(this.$refs.dellSell.$refs.delSellModal)}},Re={class:"container"},De={class:"text-end mt-4"},Be={class:"table mt-4 text-white"},He=e("thead",null,[e("tr",null,[e("th",{width:"70"}," 城市 "),e("th",null,"店名"),e("th",null," 時間 "),e("th",null," 公開 "),e("th",null," 編輯 ")])],-1),Oe={key:0,class:"text-success"},Fe={key:1},We={class:"btn-group"},je=["onClick"],qe=["onClick"];function ze(s,t,p,S,l,i){const o=u("PaginationComponent"),x=u("SellInfoModal"),M=u("delSell");return a(),d(P,null,[e("div",Re,[e("div",De,[e("button",{onClick:t[0]||(t[0]=c=>i.openModal("new")),class:"btn btn-primary"}," 建立新的文章 ")]),e("table",Be,[He,e("tbody",null,[(a(!0),d(P,null,$(l.articles,c=>(a(),d("tr",{key:c.id},[e("td",null,m(c.title),1),e("td",null,m(c.store_name),1),e("td",null,m(s.$filters.date(c.create_at)),1),e("td",null,[c.isPublic?(a(),d("span",Oe,"啟用")):(a(),d("span",Fe,"不啟用"))]),e("td",null,[e("div",We,[e("button",{onClick:y=>i.openModal("edit",c),type:"button",class:"btn btn-outline-primary btn-sm"}," 編輯 ",8,je),e("button",{onClick:y=>i.openModal("delete",c),type:"button",class:"btn btn-outline-danger btn-sm"}," 刪除 ",8,qe)])])]))),128))])])]),_(o,{pages:l.page,onEmitPages:i.getArticles},null,8,["pages","onEmitPages"]),_(x,{ref:"SellInfoModal",onUpdateSell:i.updateSell,sell:l.tempSell,isNew:l.isNew},null,8,["onUpdateSell","sell","isNew"]),_(M,{ref:"dellSell",onCloseModal:i.closeModal,tempProduct:l.tempSell,getProductsList:i.getArticles},null,8,["onCloseModal","tempProduct","getProductsList"])],64)}const Xe=f(Ne,[["render",ze]]);export{Xe as default};
