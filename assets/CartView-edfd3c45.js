import{_ as C,r as p,o as n,c as a,d as u,i as T,p as g,e as k,b as t,g as L,j as V,m as b,F as f,h as A,t as l,s as y,k as i,v as I,x as v,w as d,n as P,u as j}from"./index-55a00b2a.js";import{u as r}from"./cart-3b47baf0.js";import{u as E}from"./intoCity-3a0caaab.js";const Q={},w=e=>(g("data-v-aaf1463c"),e=e(),k(),e),R={class:"d-flex justify-content-end mt-5"},F=w(()=>t("span",null,"填寫資料",-1)),q=w(()=>t("div",{class:"liquid"},null,-1));function D(e,o){const _=p("RouterLink");return n(),a("div",R,[u(_,{to:"/form"},{default:T(()=>[F,q]),_:1})])}const N=C(Q,[["render",D],["__scopeId","data-v-aaf1463c"]]);const{VITE_APP_URL:U,VITE_APP_PATH:z}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"brad5566",BASE_URL:"/shrimpMap/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},B={data(){return{coupon_code:""}},components:{CartToForm:N},computed:{...L(r,["cart","isLoading","isAdjustQty","countdown"]),...V(r,["isLoading"])},methods:{...b(r,["adjustmentTicket","getCarts","removeCart","updateCartNum","updateCartQty","updateCartQty"]),...b(E,["closeSidebar"]),addCouponCode(){this.isLoading=!0;const e={code:this.coupon_code};this.$http({method:"post",url:`${U}api/${z}/coupon`,data:{data:e}}).then(o=>{alert("加入優惠券"),this.getCarts(),this.isLoading=!1})}},mounted(){this.getCarts(),this.closeSidebar()}},c=e=>(g("data-v-cbb91df9"),e=e(),k(),e),M={key:0,class:"container"},H=c(()=>t("div",{class:"text-end mt-10"},[t("span",{class:"text-primary"},"1. 選購商品 > "),t("span",{class:"text-secondary"},"2. 填寫資料 > "),t("span",{class:"text-secondary"},"3. 訂單完成")],-1)),O={class:"table bg-white caption-top"},W=c(()=>t("caption",{class:"ms-5 text-white h2"},"購物車",-1)),G=c(()=>t("thead",null,[t("tr",{class:"bg-title h4"},[t("th",{class:"ps-xl-5 text-center text-xl-start",scope:"col"},"店家"),t("th",{class:"ps-xl-4 text-center text-xl-start",scope:"col"},"數量"),t("th",{class:"text-center text-xl-end pe-xl-5",scope:"col"},"金額")])],-1)),J={class:"text-end",scope:"row"},K={class:"d-xl-flex flex-xl-row justify-content-xl-start d-flex flex-column align-items-end ms-xl-5"},X=["src"],Y={class:"text-end text-xl-start ms-2"},Z={class:"h6 mt-1"},tt=["onClick"],et={class:"align-middle"},st=["onClick"],ot=c(()=>t("i",{class:"bi bi-dash-lg"},null,-1)),nt=[ot],at=["value"],ct=c(()=>t("span",{class:"h6 text-center input-size ps-xl-3"},null,-1)),lt=["onClick"],dt=c(()=>t("i",{class:"bi bi-plus-lg"},null,-1)),it=[dt],rt={class:"text-xl-end text-center align-middle pe-xl-5 h4"},pt={key:0,class:"text-end h6 mt-2 text-success"},ut=c(()=>t("td",{colspan:"2",class:"text-end h5"},"總計",-1)),_t={class:"text-xl-end text-center px-xl-5 h5"},ht={key:0},xt=c(()=>t("td",{colspan:"2",class:"text-end h5 text-success"},"折價後",-1)),mt={class:"text-xl-end text-center px-xl-5 h5"},bt={class:"input-group mb-3 input-group-sm col-xl-6 col-12 ps-xl-0 ps-5 ms-auto"},ft={class:"input-group-append"},yt={class:"text-end mb-3 mb-xl-0"},vt={key:1,class:"d-flex justify-content-center align-items-center"},Ct={class:"text-white py-10"};function gt(e,o,_,kt,h,x){const $=p("Loading"),S=p("CartToForm");return n(),a(f,null,[u($,{active:e.isLoading,"z-index":1060},null,8,["active"]),e.cart.carts&&e.cart.carts.length>0?(n(),a("div",M,[H,t("table",O,[W,G,t("tbody",null,[(n(!0),a(f,null,A(e.cart.carts,s=>(n(),a("tr",{key:s.id},[t("th",J,[t("div",K,[t("img",{class:"d-block",src:s.product.imageUrl,alt:"",style:{width:"80px"}},null,8,X),t("div",Y,[t("p",Z,l(s.product.title),1),t("button",{onClick:d(m=>e.removeCart(s.id),["prevent"]),class:"btn btn-sm btn-danger mt-2",type:"button"},"移除",8,tt)])])]),t("td",et,[t("a",{onClick:d(m=>e.adjustmentTicket("-",s.id,s.qty,s.product.id),["prevent"]),class:P([{"mouse-disabled":s.qty==1},"d-inline-block px-xl-3 px-2"]),href:"#"},nt,10,st),t("input",{value:s.qty,type:"number",class:"h6 text-center input-size ps-xl-3",disabled:""},null,8,at),ct,t("a",{onClick:d(m=>e.adjustmentTicket("+",s.id,s.qty,s.product.id),["prevent"]),class:"d-inline-block px-xl-3 px-2",href:"#"},it,8,lt)]),t("td",rt,[j(" $"+l(e.$filters.currency(s.final_total))+" ",1),s.coupon?(n(),a("div",pt,"套用優惠券")):y("",!0)])]))),128))]),t("tfoot",null,[t("tr",null,[ut,t("td",_t,"$ "+l(e.$filters.currency(e.cart.total)),1)]),e.cart.final_total!==e.cart.total?(n(),a("tr",ht,[xt,t("td",mt,"$ "+l(e.$filters.currency(e.cart.final_total)),1)])):y("",!0)])]),t("div",bt,[i(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=s=>h.coupon_code=s),placeholder:"請輸入優惠碼 goodprice"},null,512),[[I,h.coupon_code]]),t("div",ft,[t("button",{class:"btn btn-outline-secondary text-white",type:"button",onClick:o[1]||(o[1]=(...s)=>x.addCouponCode&&x.addCouponCode(...s))}," 套用優惠碼 ")])]),i(t("div",yt,[t("button",{onClick:o[2]||(o[2]=d((...s)=>e.updateCartQty&&e.updateCartQty(...s),["prevent"])),class:"btn btn-outline-primary text-white",type:"button"},"點選更新購物車數量與金額")],512),[[v,e.isAdjustQty]]),i(t("div",null,[u(S)],512),[[v,!e.isAdjustQty]])])):(n(),a("div",vt,[t("h2",Ct,"目前購物車是空的，將在 "+l(e.countdown)+" 秒後導回首頁",1)]))],64)}const Tt=C(B,[["render",gt],["__scopeId","data-v-cbb91df9"]]);export{Tt as default};
